--// Destroy other instances
for _,v in pairs(game.CoreGui:GetChildren()) do
    if v.Name == "dark_UI" then
        v:Destroy()
    end
end

local dark_UI = Instance.new("ScreenGui")
dark_UI.Name = "dark_UI"
dark_UI.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
dark_UI.Parent = game.CoreGui

local Library = {}
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")
local Players = game:GetService("Players")
local LocalPlayer = Players.LocalPlayer
local Mouse = LocalPlayer:GetMouse()

function Library:Create(table)
    local windowName = table.Name
    local theme = table.Theme or "green" -- default, green, yellow, purple

    -- Theme colors
    local themeColors = {
        green = {
            toggle = Color3.fromRGB(35, 200, 100),
            toggleStroke = Color3.fromRGB(40, 220, 110)
        },
        yellow = {
            toggle = Color3.fromRGB(255, 200, 50),
            toggleStroke = Color3.fromRGB(255, 220, 80)
        },
        purple = {
            toggle = Color3.fromRGB(150, 100, 255),
            toggleStroke = Color3.fromRGB(180, 130, 255)
        }
    }

    local currentTheme = themeColors[theme] or themeColors.green

    local main = Instance.new("Frame")
    main.Name = "main"
    main.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    main.Position = UDim2.fromScale(0.5, 0.5)
    main.Size = UDim2.fromOffset(380, 240)
    main.AnchorPoint = Vector2.new(0.5, 0.5)

    local uICorner = Instance.new("UICorner")
    uICorner.CornerRadius = UDim.new(0, 6)
    uICorner.Parent = main

    -- Top bar
    local topBar = Instance.new("Frame")
    topBar.Name = "topBar"
    topBar.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
    topBar.Size = UDim2.new(1, 0, 0, 32)
    topBar.Parent = main

    local topBarCorner = Instance.new("UICorner")
    topBarCorner.CornerRadius = UDim.new(0, 6)
    topBarCorner.Parent = topBar

    local topBarCover = Instance.new("Frame")
    topBarCover.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
    topBarCover.BorderSizePixel = 0
    topBarCover.Position = UDim2.new(0, 0, 1, -6)
    topBarCover.Size = UDim2.new(1, 0, 0, 6)
    topBarCover.Parent = topBar

    -- Menu button
    local menuButton = Instance.new("TextButton")
    menuButton.Name = "menuButton"
    menuButton.Text = ""
    menuButton.BackgroundTransparency = 1
    menuButton.Position = UDim2.fromOffset(8, 8)
    menuButton.Size = UDim2.fromOffset(18, 18)
    menuButton.Parent = topBar

    for i = 0, 2 do
        local line = Instance.new("Frame")
        line.BackgroundColor3 = Color3.fromRGB(180, 180, 180)
        line.BorderSizePixel = 0
        line.Position = UDim2.fromOffset(0, 4 + (i * 5))
        line.Size = UDim2.fromOffset(18, 2)
        line.Parent = menuButton
    end

    -- Title
    local title = Instance.new("TextLabel")
    title.Name = "title"
    title.Font = Enum.Font.Gotham
    title.Text = windowName
    title.TextColor3 = Color3.fromRGB(200, 200, 200)
    title.TextSize = 13
    title.BackgroundTransparency = 1
    title.Position = UDim2.fromOffset(35, 0)
    title.Size = UDim2.new(1, -70, 1, 0)
    title.TextXAlignment = Enum.TextXAlignment.Left
    title.Parent = topBar

    -- Close button
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "closeButton"
    closeButton.Text = "Ã—"
    closeButton.Font = Enum.Font.GothamBold
    closeButton.TextSize = 18
    closeButton.TextColor3 = Color3.fromRGB(180, 180, 180)
    closeButton.BackgroundTransparency = 1
    closeButton.Position = UDim2.new(1, -28, 0, 0)
    closeButton.Size = UDim2.fromOffset(28, 32)
    closeButton.Parent = topBar

    -- Side menu
    local sideMenu = Instance.new("Frame")
    sideMenu.Name = "sideMenu"
    sideMenu.BackgroundColor3 = Color3.fromRGB(28, 28, 28)
    sideMenu.Position = UDim2.fromOffset(-160, 32)
    sideMenu.Size = UDim2.fromOffset(160, 208)
    sideMenu.Visible = false
    sideMenu.ZIndex = 10
    sideMenu.Parent = main

    local sideMenuCorner = Instance.new("UICorner")
    sideMenuCorner.CornerRadius = UDim.new(0, 6)
    sideMenuCorner.Parent = sideMenu

    local tabList = Instance.new("ScrollingFrame")
    tabList.Name = "tabList"
    tabList.BackgroundTransparency = 1
    tabList.BorderSizePixel = 0
    tabList.Size = UDim2.new(1, 0, 1, 0)
    tabList.ScrollBarThickness = 2
    tabList.ScrollBarImageColor3 = Color3.fromRGB(70, 70, 70)
    tabList.Parent = sideMenu

    local tabListLayout = Instance.new("UIListLayout")
    tabListLayout.Padding = UDim.new(0, 2)
    tabListLayout.SortOrder = Enum.SortOrder.LayoutOrder
    tabListLayout.Parent = tabList

    local tabListPadding = Instance.new("UIPadding")
    tabListPadding.PaddingTop = UDim.new(0, 6)
    tabListPadding.PaddingLeft = UDim.new(0, 6)
    tabListPadding.PaddingRight = UDim.new(0, 6)
    tabListPadding.Parent = tabList

    -- Content container
    local contentContainer = Instance.new("Frame")
    contentContainer.Name = "contentContainer"
    contentContainer.BackgroundTransparency = 1
    contentContainer.Position = UDim2.fromOffset(0, 32)
    contentContainer.Size = UDim2.new(1, 0, 1, -32)
    contentContainer.Parent = main

    local shadow = Instance.new("ImageLabel")
    shadow.Name = "shadow"
    shadow.Image = "rbxassetid://297774371"
    shadow.ImageColor3 = Color3.fromRGB(15, 15, 15)
    shadow.ImageTransparency = 0.3
    shadow.SliceCenter = Rect.new(20, 20, 280, 280)
    shadow.BackgroundTransparency = 1
    shadow.Position = UDim2.fromScale(0.5, 0.5)
    shadow.AnchorPoint = Vector2.new(0.5, 0.5)
    shadow.Size = UDim2.fromOffset(400, 260)
    shadow.ZIndex = -1
    shadow.Parent = dark_UI

    main.Parent = dark_UI

    local menuOpen = false

    menuButton.MouseButton1Click:Connect(function()
        menuOpen = not menuOpen
        if menuOpen then
            sideMenu.Visible = true
            TweenService:Create(sideMenu, TweenInfo.new(0.25, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2.fromOffset(0, 32)}):Play()
        else
            TweenService:Create(sideMenu, TweenInfo.new(0.25, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2.fromOffset(-160, 32)}):Play()
            task.wait(0.25)
            sideMenu.Visible = false
        end
    end)

    local tabHandler = {}

    function tabHandler:Exit()
        dark_UI:Destroy()
    end

    closeButton.MouseButton1Click:Connect(function()
        tabHandler:Exit()
    end)

    function tabHandler:Tab(name)
        local tabButton = Instance.new("TextButton")
        tabButton.Name = name
        tabButton.Font = Enum.Font.Gotham
        tabButton.Text = name
        tabButton.TextColor3 = Color3.fromRGB(180, 180, 180)
        tabButton.TextSize = 12
        tabButton.TextXAlignment = Enum.TextXAlignment.Left
        tabButton.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
        tabButton.BackgroundTransparency = 0.6
        tabButton.Size = UDim2.new(1, -8, 0, 28)
        tabButton.AutoButtonColor = false
        tabButton.Parent = tabList

        local tabButtonCorner = Instance.new("UICorner")
        tabButtonCorner.CornerRadius = UDim.new(0, 4)
        tabButtonCorner.Parent = tabButton

        local tabButtonPadding = Instance.new("UIPadding")
        tabButtonPadding.PaddingLeft = UDim.new(0, 8)
        tabButtonPadding.Parent = tabButton

        local container = Instance.new("Frame")
        container.Name = "container"
        container.BackgroundTransparency = 1
        container.Size = UDim2.new(1, 0, 1, 0)
        container.Visible = false
        container.Parent = contentContainer
        
        local holder = Instance.new("ScrollingFrame")
        holder.Name = "holder"
        holder.ScrollBarImageColor3 = Color3.fromRGB(70, 70, 70)
        holder.ScrollBarThickness = 2
        holder.ScrollingDirection = Enum.ScrollingDirection.Y
        holder.Active = true
        holder.BackgroundTransparency = 1
        holder.BorderSizePixel = 0
        holder.Size = UDim2.new(1, 0, 1, 0)
        holder.Parent = container

        local uIPadding1 = Instance.new("UIPadding")
        uIPadding1.PaddingLeft = UDim.new(0, 10)
        uIPadding1.PaddingRight = UDim.new(0, 10)
        uIPadding1.PaddingTop = UDim.new(0, 8)
        uIPadding1.Parent = holder

        local uIListLayout1 = Instance.new("UIListLayout")
        uIListLayout1.Padding = UDim.new(0, 5)
        uIListLayout1.SortOrder = Enum.SortOrder.LayoutOrder
        uIListLayout1.Parent = holder

        tabButton.MouseButton1Click:Connect(function()
            for _, v in pairs(contentContainer:GetChildren()) do
                if v.Name == "container" then
                    v.Visible = false
                end
            end
            for _, v in pairs(tabList:GetChildren()) do
                if v:IsA('TextButton') then
                    TweenService:Create(v, TweenInfo.new(0.2), {BackgroundTransparency = 0.6}):Play()
                end
            end
            container.Visible = true
            TweenService:Create(tabButton, TweenInfo.new(0.2), {BackgroundTransparency = 0}):Play()
            
            menuOpen = false
            TweenService:Create(sideMenu, TweenInfo.new(0.25, Enum.EasingStyle.Quart, Enum.EasingDirection.Out), {Position = UDim2.fromOffset(-160, 32)}):Play()
            task.wait(0.25)
            sideMenu.Visible = false
        end)

        local ElementHandler = {}
        
        function ElementHandler:Label(text)
            local label = Instance.new("Frame")
            label.Name = "label"
            label.BackgroundTransparency = 1
            label.Size = UDim2.new(1, 0, 0, 20)
            label.Parent = holder
    
            local textLabel = Instance.new("TextLabel")
            textLabel.Font = Enum.Font.Gotham
            textLabel.Text = text
            textLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
            textLabel.TextSize = 12
            textLabel.TextXAlignment = Enum.TextXAlignment.Left
            textLabel.BackgroundTransparency = 1
            textLabel.Size = UDim2.new(1, 0, 1, 0)
            textLabel.Parent = label
        end

        function ElementHandler:Button(text, callback)
            text = text or "Button"
            callback = callback or function() end

            local button = Instance.new("TextButton")
            button.Name = "button"
            button.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
            button.Size = UDim2.new(1, 0, 0, 32)
            button.Text = ""
            button.AutoButtonColor = false

            local uICorner12 = Instance.new("UICorner")
            uICorner12.CornerRadius = UDim.new(0, 4)
            uICorner12.Parent = button

            local textLabel5 = Instance.new("TextLabel")
            textLabel5.Font = Enum.Font.Gotham
            textLabel5.Text = text
            textLabel5.TextColor3 = Color3.fromRGB(200, 200, 200)
            textLabel5.TextSize = 12
            textLabel5.TextXAlignment = Enum.TextXAlignment.Left
            textLabel5.BackgroundTransparency = 1
            textLabel5.Position = UDim2.fromOffset(10, 0)
            textLabel5.Size = UDim2.new(1, -10, 1, 0)
            textLabel5.Parent = button

            button.Parent = holder

            button.MouseEnter:Connect(function()
                TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(43,43,43)}):Play()
            end)

            button.MouseLeave:Connect(function()
                TweenService:Create(button, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(38,38,38)}):Play()
            end)

            button.MouseButton1Click:Connect(function()
                callback()
            end)
        end

        function ElementHandler:Slider(text, min, max, default, callback)
            text = text or "Slider"
            min = min or 0
            max = max or 100
            default = default or min
            callback = callback or function() end

            local slider = Instance.new("Frame")
            slider.Name = "slider"
            slider.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
            slider.Size = UDim2.new(1, 0, 0, 34)
            slider.Parent = holder

            local sliderCorner = Instance.new("UICorner")
            sliderCorner.CornerRadius = UDim.new(0, 4)
            sliderCorner.Parent = slider

            local sliderLabel = Instance.new("TextLabel")
            sliderLabel.Font = Enum.Font.Gotham
            sliderLabel.Text = text
            sliderLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
            sliderLabel.TextSize = 12
            sliderLabel.TextXAlignment = Enum.TextXAlignment.Left
            sliderLabel.BackgroundTransparency = 1
            sliderLabel.Position = UDim2.fromOffset(10, 6)
            sliderLabel.Size = UDim2.new(0.6, -10, 0, 16)
            sliderLabel.Parent = slider

            local valueLabel = Instance.new("TextLabel")
            valueLabel.Font = Enum.Font.Gotham
            valueLabel.Text = tostring(default)
            valueLabel.TextColor3 = Color3.fromRGB(200, 200, 200)
            valueLabel.TextSize = 12
            valueLabel.TextXAlignment = Enum.TextXAlignment.Right
            valueLabel.BackgroundTransparency = 1
            valueLabel.Position = UDim2.fromOffset(0, 6)
            valueLabel.Size = UDim2.new(1, -10, 0, 16)
            valueLabel.Parent = slider

            local sliderButton = Instance.new("TextButton")
            sliderButton.Name = "sliderButton"
            sliderButton.Text = ""
            sliderButton.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
            sliderButton.Position = UDim2.fromOffset(10, 24)
            sliderButton.Size = UDim2.new(1, -20, 0, 6)
            sliderButton.AutoButtonColor = false
            sliderButton.Parent = slider

            local sliderBtnCorner = Instance.new("UICorner")
            sliderBtnCorner.CornerRadius = UDim.new(0, 3)
            sliderBtnCorner.Parent = sliderButton

            local sliderFill = Instance.new("Frame")
            sliderFill.Name = "sliderFill"
            sliderFill.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
            sliderFill.Size = UDim2.new(0, 0, 1, 0)
            sliderFill.Parent = sliderButton

            local fillCorner = Instance.new("UICorner")
            fillCorner.CornerRadius = UDim.new(0, 3)
            fillCorner.Parent = sliderFill

            local dragging = false
            
            local percentage = (default - min) / (max - min)
            sliderFill.Size = UDim2.new(percentage, 0, 1, 0)

            local function update(input)
                local pos = input.Position
                local relativeX = pos.X - sliderButton.AbsolutePosition.X
                local percentage = math.clamp(relativeX / sliderButton.AbsoluteSize.X, 0, 1)
                local value = math.floor(min + (max - min) * percentage)
                
                valueLabel.Text = tostring(value)
                TweenService:Create(sliderFill, TweenInfo.new(0.05), {Size = UDim2.new(percentage, 0, 1, 0)}):Play()
                callback(value)
            end

            sliderButton.InputBegan:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = true
                    update(input)
                end
            end)

            sliderButton.InputEnded:Connect(function(input)
                if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
                    dragging = false
                end
            end)

            UserInputService.InputChanged:Connect(function(input)
                if dragging and (input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch) then
                    update(input)
                end
            end)
        end

        function ElementHandler:Toggle(text, callback)
            text = text or "Toggle"
            callback = callback or function() end

            local toggle1 = Instance.new("TextButton")
            toggle1.Name = "toggle1"
            toggle1.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
            toggle1.Size = UDim2.new(1, 0, 0, 32)
            toggle1.Text = ""
            toggle1.AutoButtonColor = false
            toggle1.Parent = holder

            local toggleCorner = Instance.new("UICorner")
            toggleCorner.CornerRadius = UDim.new(0, 4)
            toggleCorner.Parent = toggle1

            local textLabel4 = Instance.new("TextLabel")
            textLabel4.Font = Enum.Font.Gotham
            textLabel4.Text = text
            textLabel4.TextColor3 = Color3.fromRGB(200, 200, 200)
            textLabel4.TextSize = 12
            textLabel4.TextXAlignment = Enum.TextXAlignment.Left
            textLabel4.BackgroundTransparency = 1
            textLabel4.Position = UDim2.fromOffset(10, 0)
            textLabel4.Size = UDim2.new(0.82, -10, 1, 0)
            textLabel4.Parent = toggle1

            local toggleBox = Instance.new("Frame")
            toggleBox.Name = "toggleBox"
            toggleBox.BackgroundColor3 = Color3.fromRGB(45, 45, 45)
            toggleBox.Position = UDim2.new(1, -26, 0.5, -9)
            toggleBox.Size = UDim2.fromOffset(18, 18)
            toggleBox.Parent = toggle1

            local toggleBoxCorner = Instance.new("UICorner")
            toggleBoxCorner.CornerRadius = UDim.new(0, 3)
            toggleBoxCorner.Parent = toggleBox

            local uIStroke1 = Instance.new("UIStroke")
            uIStroke1.Color = Color3.fromRGB(76, 76, 76)
            uIStroke1.Parent = toggleBox

            local tog = false

            toggle1.MouseEnter:Connect(function()
                TweenService:Create(toggle1, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(43,43,43)}):Play()
            end)

            toggle1.MouseLeave:Connect(function()
                TweenService:Create(toggle1, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(38,38,38)}):Play()
            end)

            toggle1.MouseButton1Click:Connect(function()
                tog = not tog
                callback(tog)
                if tog then
                    TweenService:Create(toggleBox, TweenInfo.new(0.2), {BackgroundColor3 = currentTheme.toggle}):Play()
                    TweenService:Create(uIStroke1, TweenInfo.new(0.2), {Color = currentTheme.toggleStroke}):Play()
                else
                    TweenService:Create(toggleBox, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(45, 45, 45)}):Play()
                    TweenService:Create(uIStroke1, TweenInfo.new(0.2), {Color = Color3.fromRGB(76, 76, 76)}):Play()
                end
            end)
        end

        function ElementHandler:Textbox(text, callback)
            text = text or "Textbox"
            callback = callback or function() end

            local textboxFrame = Instance.new("Frame")
            textboxFrame.Name = "textbox"
            textboxFrame.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
            textboxFrame.Size = UDim2.new(1, 0, 0, 32)
            textboxFrame.Parent = holder

            local textboxCorner = Instance.new("UICorner")
            textboxCorner.CornerRadius = UDim.new(0, 4)
            textboxCorner.Parent = textboxFrame

            local textboxLabel = Instance.new("TextLabel")
            textboxLabel.Font = Enum.Font.Gotham
            textboxLabel.Text = text
            textboxLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
            textboxLabel.TextSize = 12
            textboxLabel.TextXAlignment = Enum.TextXAlignment.Left
            textboxLabel.BackgroundTransparency = 1
            textboxLabel.Position = UDim2.fromOffset(10, 8)
            textboxLabel.Size = UDim2.new(0.6, -10, 0, 16)
            textboxLabel.Parent = textboxFrame

            local textBox = Instance.new("TextBox")
            textBox.Name = "textBox"
            textBox.Font = Enum.Font.Gotham
            textBox.PlaceholderText = "value1, value2, ..."
            textBox.PlaceholderColor3 = Color3.fromRGB(100, 100, 100)
            textBox.Text = ""
            textBox.TextColor3 = Color3.fromRGB(200, 200, 200)
            textBox.TextSize = 10
            textBox.TextXAlignment = Enum.TextXAlignment.Left
            textBox.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
            textBox.Position = UDim2.new(0.6, 0, 0.5, -10)
            textBox.Size = UDim2.new(0.4, -10, 0, 20)
            textBox.Parent = textboxFrame

            local textBoxCorner = Instance.new("UICorner")
            textBoxCorner.CornerRadius = UDim.new(0, 4)
            textBoxCorner.Parent = textBox

            local textBoxPadding = Instance.new("UIPadding")
            textBoxPadding.PaddingLeft = UDim.new(0, 6)
            textBoxPadding.PaddingRight = UDim.new(0, 6)
            textBoxPadding.Parent = textBox

            textBox.FocusLost:Connect(function()
                local values = {}
                for value in string.gmatch(textBox.Text, "([^,]+)") do
                    local trimmed = value:match("^%s*(.-)%s*$")
                    if trimmed ~= "" then
                        table.insert(values, trimmed)
                    end
                end
                callback(values)
            end)

            textboxFrame.MouseEnter:Connect(function()
                TweenService:Create(textboxFrame, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(43,43,43)}):Play()
            end)

            textboxFrame.MouseLeave:Connect(function()
                TweenService:Create(textboxFrame, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(38,38,38)}):Play()
            end)
        end

        function ElementHandler:Dropdown(text, options, callback)
            text = text or "Dropdown"
            options = options or {}
            callback = callback or function() end

            local dropdown = Instance.new("Frame")
            dropdown.Name = "dropdown"
            dropdown.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
            dropdown.Size = UDim2.new(1, 0, 0, 32)
            dropdown.ClipsDescendants = false
            dropdown.Parent = holder

            local dropCorner = Instance.new("UICorner")
            dropCorner.CornerRadius = UDim.new(0, 4)
            dropCorner.Parent = dropdown

            local dropLabel = Instance.new("TextLabel")
            dropLabel.Font = Enum.Font.Gotham
            dropLabel.Text = text
            dropLabel.TextColor3 = Color3.fromRGB(180, 180, 180)
            dropLabel.TextSize = 12
            dropLabel.TextXAlignment = Enum.TextXAlignment.Left
            dropLabel.BackgroundTransparency = 1
            dropLabel.Position = UDim2.fromOffset(10, 0)
            dropLabel.Size = UDim2.new(0.6, -10, 1, 0)
            dropLabel.Parent = dropdown

            local arrow = Instance.new("TextLabel")
            arrow.Font = Enum.Font.GothamBold
            arrow.Text = "^"
            arrow.TextColor3 = Color3.fromRGB(180, 180, 180)
            arrow.TextSize = 10
            arrow.BackgroundTransparency = 1
            arrow.Position = UDim2.new(1, -26, 0, 0)
            arrow.Size = UDim2.fromOffset(18, 32)
            arrow.Rotation = 180
            arrow.Parent = dropdown

            local dropButton = Instance.new("TextButton")
            dropButton.Name = "dropButton"
            dropButton.Text = ""
            dropButton.BackgroundTransparency = 1
            dropButton.Size = UDim2.new(1, 0, 1, 0)
            dropButton.AutoButtonColor = false
            dropButton.Parent = dropdown

            local optionsList = Instance.new("Frame")
            optionsList.Name = "optionsList"
            optionsList.BackgroundColor3 = Color3.fromRGB(33, 33, 33)
            optionsList.Position = UDim2.fromOffset(0, 34)
            optionsList.Size = UDim2.new(1, 0, 0, 0)
            optionsList.ClipsDescendants = true
            optionsList.ZIndex = 5
            optionsList.Parent = dropdown

            local optionsCorner = Instance.new("UICorner")
            optionsCorner.CornerRadius = UDim.new(0, 4)
            optionsCorner.Parent = optionsList

            local optionsLayout = Instance.new("UIListLayout")
            optionsLayout.Padding = UDim.new(0, 2)
            optionsLayout.SortOrder = Enum.SortOrder.LayoutOrder
            optionsLayout.Parent = optionsList

            local optionsPadding = Instance.new("UIPadding")
            optionsPadding.PaddingTop = UDim.new(0, 3)
            optionsPadding.PaddingBottom = UDim.new(0, 3)
            optionsPadding.PaddingLeft = UDim.new(0, 3)
            optionsPadding.PaddingRight = UDim.new(0, 3)
            optionsPadding.Parent = optionsList

            local isOpen = false

            for _, option in pairs(options) do
                local optionBtn = Instance.new("TextButton")
                optionBtn.Name = option
                optionBtn.Font = Enum.Font.Gotham
                optionBtn.Text = option
                optionBtn.TextColor3 = Color3.fromRGB(180, 180, 180)
                optionBtn.TextSize = 11
                optionBtn.TextXAlignment = Enum.TextXAlignment.Left
                optionBtn.BackgroundColor3 = Color3.fromRGB(38, 38, 38)
                optionBtn.Size = UDim2.new(1, -6, 0, 24)
                optionBtn.AutoButtonColor = false
                optionBtn.Parent = optionsList

                local optionCorner = Instance.new("UICorner")
                optionCorner.CornerRadius = UDim.new(0, 3)
                optionCorner.Parent = optionBtn

                local optionPadding = Instance.new("UIPadding")
                optionPadding.PaddingLeft = UDim.new(0, 8)
                optionPadding.Parent = optionBtn

                optionBtn.MouseEnter:Connect(function()
                    TweenService:Create(optionBtn, TweenInfo.new(0.15), {BackgroundColor3 = Color3.fromRGB(43,43,43)}):Play()
                end)

                optionBtn.MouseLeave:Connect(function()
                    TweenService:Create(optionBtn, TweenInfo.new(0.15), {BackgroundColor3 = Color3.fromRGB(38,38,38)}):Play()
                end)

                optionBtn.MouseButton1Click:Connect(function()
                    dropLabel.Text = text .. " - " .. option
                    callback(option)
                    isOpen = false
                    TweenService:Create(optionsList, TweenInfo.new(0.2), {Size = UDim2.new(1, 0, 0, 0)}):Play()
                    TweenService:Create(arrow, TweenInfo.new(0.2), {Rotation = 180}):Play()
                end)
            end

            dropButton.MouseEnter:Connect(function()
                TweenService:Create(dropdown, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(43,43,43)}):Play()
            end)

            dropButton.MouseLeave:Connect(function()
                TweenService:Create(dropdown, TweenInfo.new(0.2), {BackgroundColor3 = Color3.fromRGB(38,38,38)}):Play()
            end)

            dropButton.MouseButton1Click:Connect(function()
                isOpen = not isOpen
                if isOpen then
                    local totalHeight = (#options * 26) + 6
                    TweenService:Create(optionsList, TweenInfo.new(0.2), {Size = UDim2.new(1, 0, 0, totalHeight)}):Play()
                    TweenService:Create(arrow, TweenInfo.new(0.2), {Rotation = 0}):Play()
                else
                    TweenService:Create(optionsList, TweenInfo.new(0.2), {Size = UDim2.new(1, 0, 0, 0)}):Play()
                    TweenService:Create(arrow, TweenInfo.new(0.2), {Rotation = 180}):Play()
                end
            end)
        end

        return ElementHandler
    end
    
    -- Drag functionality (Mobile + Desktop)
    local dragging = false
    local dragInput
    local dragStart
    local startPos

    local function update(input)
        local delta = input.Position - dragStart
        TweenService:Create(main, TweenInfo.new(0.1), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play()
        TweenService:Create(shadow, TweenInfo.new(0.1), {Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)}):Play()
    end

    topBar.InputBegan:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseButton1 or input.UserInputType == Enum.UserInputType.Touch then
            dragging = true
            dragStart = input.Position
            startPos = main.Position
            
            input.Changed:Connect(function()
                if input.UserInputState == Enum.UserInputState.End then
                    dragging = false
                end
            end)
        end
    end)

    topBar.InputChanged:Connect(function(input)
        if input.UserInputType == Enum.UserInputType.MouseMovement or input.UserInputType == Enum.UserInputType.Touch then
            dragInput = input
        end
    end)

    UserInputService.InputChanged:Connect(function(input)
        if input == dragInput and dragging then
            update(input)
        end
    end)

    -- Make first tab visible
    task.spawn(function()
        repeat task.wait() until tabList:FindFirstChildOfClass("TextButton")
        local firstTab = tabList:FindFirstChildOfClass("TextButton")
        if firstTab then
            firstTab.BackgroundTransparency = 0
            for _, v in pairs(contentContainer:GetChildren()) do
                if v.Name == "container" then
                    v.Visible = true
                    break
                end
            end
        end
    end)

    -- Startup sound
    spawn(function()
        if table.StartupSound and table.StartupSound.Toggle and table.StartupSound.SoundID ~= nil then
            local sound = Instance.new('Sound', game.CoreGui)
            sound.Name = "Startup Sound"
            sound.SoundId = table.StartupSound.SoundID
            sound.Volume = 1.5
            sound.TimePosition = table.StartupSound.TimePosition or 0
            sound:Play()
            sound.Stopped:Wait()
            sound:Destroy()
        end
    end)

    return tabHandler
end

return Library
